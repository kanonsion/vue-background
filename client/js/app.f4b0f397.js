(function(e){function t(t){for(var a,r,c=t[0],s=t[1],l=t[2],u=0,d=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);h&&h(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-34a194d4":"724bc1f4","chunk-61ad5694":"2b1e81bd","chunk-02f1b03c":"a4dbf930","chunk-05f6f08f":"02f51e82","chunk-28e7bd43":"c528af90","chunk-3393ffc6":"a000ab93","chunk-3ec3351a":"4d3fadce","chunk-41598b8a":"cd47bb53","chunk-790bf77e":"44e469cc","chunk-b34659c8":"15d96773","chunk-d96ce4a0":"747ca70d"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-34a194d4":1,"chunk-02f1b03c":1,"chunk-05f6f08f":1,"chunk-28e7bd43":1,"chunk-3ec3351a":1,"chunk-41598b8a":1,"chunk-790bf77e":1,"chunk-b34659c8":1,"chunk-d96ce4a0":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-34a194d4":"249edf88","chunk-61ad5694":"31d6cfe0","chunk-02f1b03c":"a700c11b","chunk-05f6f08f":"73da5dd9","chunk-28e7bd43":"75858c4e","chunk-3393ffc6":"31d6cfe0","chunk-3ec3351a":"bb456ff2","chunk-41598b8a":"7d0a5585","chunk-790bf77e":"9298a4c1","chunk-b34659c8":"483afd8b","chunk-d96ce4a0":"18d1e4ae"}[e]+".css",o=s.p+a,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var l=i[c],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){l=d[c],u=l.getAttribute("data-href");if(u===a||u===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],h.parentNode.removeChild(h),n(i)},h.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(h)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=c(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(h);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}o[e]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var h=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0307":function(e,t,n){},"0f95":function(e,t,n){},"342f":function(e,t,n){"use strict";var a=n("4c8a"),r=n.n(a);r.a},4360:function(e,t,n){"use strict";var a=n("2b0e"),r=n("2f62"),o=n("04e1"),i=n.n(o),c=n("a18c");const s={user({commit:e},t){e("SET_USER",t)},role({commit:e},t){return new Promise(n=>{const a=i()(t).identity;console.log(a),e("SET_ROLE",a),n(a)})},clearUser({commit:e},t){sessionStorage.removeItem("token"),Object(c["c"])(),e("CLEAR_USER",t)}},l={SET_USER(e,t){e.user=t||""},CLEAR_USER(e){e.user="",e.role=""},SET_ROLE(e,t){e.role=t}},u={user:"",role:""},d={user:e=>e.user};var h={actions:s,mutations:l,state:u,getters:d};const m={routes:[]},f={setRoutes({commit:e},t){return new Promise(n=>{let a=[];t.includes("admin")?a=c["a"]:(a=b(c["a"],t),console.log(a)),e("SET-ROUTES",a),n(a)})}},p={"SET-ROUTES"(e,t){e.routes=t}};function b(e,t){let n=[];console.log(e);for(const a of e)g(a,t)&&(a.children&&(a.children=b(a.children,t)),n.push(a));return n}function g(e,t){return!e.roles||e.roles.includes(t)}var k={state:m,actions:f,mutations:p},v={user:h,permisson:k};a["default"].use(r["a"]);const y=new r["a"].Store({modules:v});t["a"]=y},"4c8a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],i={},c=i,s=n("2877"),l=Object(s["a"])(c,r,o,!1,null,"5f454728",null),u=l.exports,d=n("a18c"),h=n("4360"),m=(n("f5df"),n("b20f"),n("0fae"),n("5c96")),f=n.n(m),p=n("b2d8"),b=n.n(p),g=(n("64e1"),n("323e")),k=n.n(g);n("a5d8");const v=["/login","/register"];d["b"].beforeEach(async(e,t,n)=>{const a=sessionStorage.token;if(a)if("/login"===e.path)n({path:"/"}),k.a.done();else{const t=h["a"].state.user.role;if(t)n();else try{const t=await h["a"].dispatch("role",a),r=await h["a"].dispatch("setRoutes",t);console.log(r),d["b"].addRoutes(r),n({...e,replace:!0})}catch(r){await h["a"].dispatch("clearUser"),n("/login"),k.a.done()}}else-1!==v.indexOf(e.path)?n():(n("/login"),k.a.done())}),d["b"].afterEach(()=>{k.a.done()});var y=n("98c9"),_=n("2819"),w=n.n(_);a["default"].config.productionTip=!1,a["default"].use(f.a).use(b.a).use(y["a"]).use(w.a),new a["default"]({router:d["b"],store:h["a"],render:function(e){return e(u)}}).$mount("#app")},a18c:function(e,t,n){"use strict";n.d(t,"a",(function(){return W})),n.d(t,"c",(function(){return I}));var a=n("2b0e"),r=n("8c4f"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%",width:"100%"}},[n("myaside",{attrs:{asideWidth:e.asideWidth,isCollapse:e.isCollapse}}),n("el-container",{style:{marginLeft:e.asideWidth+"px"},attrs:{direction:"vertical"}},[n("myheader",{on:{isCollapse:e.handleCollapse}}),n("mymain")],1)],1)},i=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-header",[n("el-row",{attrs:{justify:"center",type:"flex",align:"center"}},[n("el-col",{attrs:{span:1}},[n("span",{staticClass:"icon"},[e.collapse?e._e():n("i",{staticClass:"el-icon-s-fold",on:{click:e.toggleIcon}}),e.collapse?n("i",{staticClass:"el-icon-s-unfold",on:{click:e.toggleIcon}}):e._e()])]),n("el-col",{attrs:{span:20}},[n("breadcrumb")],1),n("el-col",{staticClass:"user",attrs:{span:1}},[n("div",{staticClass:"userinfo"},[n("img",{attrs:{src:e.user.avatar,alt:""}})])]),n("el-col",{staticClass:"user",attrs:{span:1}},[n("span",[e._v(e._s(e.user.name))]),n("el-dropdown",{on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"info"}},[e._v("个人信息")]),n("el-dropdown-item",{attrs:{divided:"",command:"exit"}},[e._v("退出")])],1)],1)],1)],1)],1)},s=[],l=n("2f62"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"breadcrumb"},[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("transition-group",{attrs:{name:"breadcrumb"}},e._l(e.breads,(function(t,a){return n("el-breadcrumb-item",{key:t.path},[a==e.breads.length-1?n("span",{staticClass:"no-redirect"},[e._v(e._s(t.meta.title))]):n("span",{staticClass:"link",on:{click:function(n){return e.handleLink(t)}}},[e._v(e._s(t.meta.title))])])})),1)],1)],1)},d=[],h={data(){return{collapse:!1}},methods:{show(){this.collapse=!this.collapse,this.$emit("isCollapse",this.collapse)},handleLink(e){this.$route.path!==e.redirect&&this.$router.push(e.redirect)}},computed:{breads(){return console.log(this.$route.matched),"/chart"===this.$route.matched[0].path?[this.$route.matched[0]]:this.$route.matched}}},m=h,f=(n("a659"),n("2877")),p=Object(f["a"])(m,u,d,!1,null,"33de7c8d",null),b=p.exports,g={components:{breadcrumb:b},data(){return{collapse:!1}},methods:{...Object(l["b"])(["clearUser"]),handleCommand(e){switch(e){case"info":this.$alert(this.user,"个人信息",{confirmButtonText:"确定"});break;case"exit":this.clearUser(),this.$router.push("/login")}},toggleIcon(){this.collapse=!this.collapse,this.$emit("isCollapse",this.collapse)}},computed:{...Object(l["c"])({user:e=>e.user})}},k=g,v=(n("cbee"),Object(f["a"])(k,c,s,!1,null,"97b34bba",null)),y=v.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-aside",{attrs:{width:e.asideWidth+"px"}},[n("el-menu",{attrs:{"background-color":"#34495e","text-color":"#fff",collapse:e.isCollapse,"collapse-transition":!0,"unique-opened":!0,router:"","default-active":e.active},on:{select:e.handleMenuSelect}},[e._l(e.routers,(function(t,a){return[t.always?e._l(t.children,(function(a,r){return n("el-menu-item",{key:r,attrs:{index:t.path+"/"+a.path}},[n("i",{class:t.meta.icon}),e._v(e._s(t.meta.title))])})):n("el-submenu",{key:a,attrs:{index:t.path}},[n("template",{slot:"title"},[n("i",{class:t.meta.icon}),n("span",[e._v(e._s(t.meta.title))])]),e._l(t.children,(function(a,r){return n("el-menu-item",{key:r,attrs:{index:t.path+"/"+a.path}},[n("i",{class:a.meta.icon}),e._v(e._s(a.meta.title))])}))],2)]}))],2)],1)},w=[],C={data(){return{active:""}},methods:{handleOpen(e,t){console.log(e,t)},handleClose(e,t){console.log(e,t)},handleMenuSelect(e,t){console.log(e),console.log(t)}},props:{asideWidth:{type:Number},isCollapse:{type:Boolean}},computed:{routers(){return console.log(this.$store.state.permisson.routes),this.$store.state.permisson.routes.filter(e=>!1===e.hiddle)}},created(){this.active=this.$route.path},watch:{$route(e){this.active=e.path}}},E=C,x=(n("fd79"),Object(f["a"])(E,_,w,!1,null,"1d8a9a60",null)),O=x.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",[n("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[n("router-view")],1)],1)},j=[],P={},$=P,T=(n("342f"),Object(f["a"])($,S,j,!1,null,"30383bca",null)),L=T.exports,R={components:{myheader:y,mymain:L,myaside:O},data(){return{isCollapse:!1,asideWidth:200}},methods:{handleOpen(e,t){console.log(e,t)},handleClose(e,t){console.log(e,t)},handleCollapse(e){this.asideWidth=e?65:200,this.isCollapse=e}}},U=R,A=Object(f["a"])(U,o,i,!1,null,"4d19fcda",null),M=A.exports;a["default"].use(r["a"]);const B=[{path:"/register",hiddle:!0,component:()=>Promise.all([n.e("chunk-61ad5694"),n.e("chunk-3ec3351a")]).then(n.bind(null,"04e9"))},{path:"/login",hiddle:!0,component:()=>Promise.all([n.e("chunk-61ad5694"),n.e("chunk-b34659c8")]).then(n.bind(null,"812b"))}],W=[{path:"/",redirect:"/chart/index",hiddle:!0,roles:["admin","nor"]},{path:"/chart",component:M,hiddle:!1,always:!0,roles:["admin","nor"],meta:{title:"首页",icon:"el-icon-pie-chart"},children:[{path:"index",component:()=>Promise.all([n.e("chunk-61ad5694"),n.e("chunk-02f1b03c")]).then(n.bind(null,"6aef"))}]},{path:"*",hiddle:!0,roles:["admin","nor"],component:()=>n.e("chunk-34a194d4").then(n.bind(null,"8cdb"))},{path:"/user",redirect:"/user/list",component:M,name:"user",hiddle:!1,roles:["admin"],meta:{title:"用户",icon:"el-icon-user"},children:[{path:"list",name:"list",component:()=>Promise.all([n.e("chunk-61ad5694"),n.e("chunk-41598b8a")]).then(n.bind(null,"21ad")),roles:["admin"],meta:{title:"用户管理",icon:"el-icon-film            "}}]},{path:"/aritice",redirect:"/aritice/writearitice",component:M,hiddle:!1,name:"aritice",roles:["admin","nor"],meta:{title:"文章",icon:"el-icon-reading"},children:[{path:"writearitice",component:()=>Promise.all([n.e("chunk-61ad5694"),n.e("chunk-05f6f08f")]).then(n.bind(null,"265d")),name:"writearitice",roles:["admin","nor"],meta:{title:"文章编写",icon:"el-icon-edit-outline"}},{path:"articleList",component:()=>Promise.all([n.e("chunk-61ad5694"),n.e("chunk-28e7bd43")]).then(n.bind(null,"1414")),name:"articleList",roles:["admin"],meta:{title:"文章管理",icon:"el-icon-document-checked "}}]},{path:"/tags",redirect:"/tags/list",component:M,hiddle:!1,name:"tags",roles:["admin","nor"],meta:{title:"标签",icon:"el-icon-notebook-1"},children:[{path:"add",component:()=>Promise.all([n.e("chunk-61ad5694"),n.e("chunk-3393ffc6")]).then(n.bind(null,"fd1f")),name:"add",roles:["admin"],meta:{title:"新增标签",icon:"el-icon-position"}},{path:"list",component:()=>Promise.all([n.e("chunk-61ad5694"),n.e("chunk-790bf77e")]).then(n.bind(null,"f9f9")),name:"list",roles:["admin"],meta:{title:"标签管理",icon:"el-icon-notebook-2"}}]},{path:"/comment",redirect:"/comment/list",component:M,hiddle:!1,name:"comment",roles:["admin","nor"],meta:{title:"评论",icon:"el-icon-chat-line-square      "},children:[{path:"list",component:()=>Promise.all([n.e("chunk-61ad5694"),n.e("chunk-d96ce4a0")]).then(n.bind(null,"58f6")),name:"list",roles:["admin"],meta:{title:"标签管理",icon:"el-icon-chat-square          "}}]}],N=()=>new r["a"]({mode:"history",routes:B});let q=N();const I=()=>{const e=N();q.matcher=e.matcher};t["b"]=q},a659:function(e,t,n){"use strict";var a=n("b518"),r=n.n(a);r.a},b20f:function(e,t,n){e.exports={menuText:"#bfcbd9",menuActiveText:"#409eff",subMenuActiveText:"#f4f4f5",menuBg:"#304156",menuHover:"#263445",subMenuBg:"#1f2d3d",subMenuHover:"#001528",sideBarWidth:"210px"}},b518:function(e,t,n){},cbee:function(e,t,n){"use strict";var a=n("0f95"),r=n.n(a);r.a},fd79:function(e,t,n){"use strict";var a=n("0307"),r=n.n(a);r.a}});
//# sourceMappingURL=app.f4b0f397.js.map