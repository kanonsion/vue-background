(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d96ce4a0"],{"58f6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top"},[a("div",{staticClass:"top-inner"},[a("div",[t._v("评论所属标签:")]),a("el-select",{attrs:{placeholder:"请选择标签"},on:{change:t.tagChange},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.options,(function(t){return a("el-option",{key:t._id,attrs:{label:t.tag,value:t.children}})})),1)],1),t.options2.length?a("div",{staticClass:"top-inner"},[a("div",[t._v("评论所属文章:")]),a("el-select",{attrs:{placeholder:"请选择文章标题"},on:{change:t.ariticeChange},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},t._l(t.options2,(function(t){return a("el-option",{key:t._id,attrs:{label:t.title,value:t._id}})})),1)],1):t._e(),a("el-button",{attrs:{type:"primary"},on:{click:t.select}},[t._v("筛选")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","row-key":"_id"}},[a("el-table-column",{attrs:{prop:"date",formatter:t.dateFormat,label:"日期"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"comment",label:"评论内容","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.paginations.page,"page-sizes":t.paginations.pageSizes,"page-size":t.paginations.pageSize,layout:t.paginations.layout,total:t.paginations.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},n=[],s=a("b775");const l=()=>Object(s["a"])("get","/comment/aritice"),o=t=>Object(s["a"])("post","/comment/list",t),r=(t,e)=>Object(s["a"])("post",`/comment/del/${t}`,e);var c=a("7f08"),d={data(){return{options:[],options2:[],value1:"",value2:"",paginations:{pageSize:5,total:0,pageSizes:[5,10,20,50],layout:"total, sizes, prev, pager, next",page:1},id:"",tableData:[]}},methods:{dateFormat(t){return Object(c["a"])(t)},load(t,e,a){setTimeout(()=>{a([{id:31,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{id:32,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"}])},1e3)},async _getTags(){this.options=await l()},async _getList(t){let e=await o(t);console.log(e),this.tableData=e.list,this.paginations.total=0|e.total},async del(t,e){let a=await r(t,e);this.$message({message:a.msg,type:"success"}),this._getList({...this.paginations,id:this.id})},tagChange(t){this.options2=t,this.id=""},ariticeChange(t){this.id=t},select(){this._getList({...this.paginations,id:this.id})},handleSizeChange(t){this.paginations.page=1,this.paginations.pageSize=t,this._getList({...this.paginations,id:this.id})},handleCurrentChange(t){this.paginations.page=t,this._getList({...this.paginations,id:this.id})},handleDelete(t,e){console.log(e);let a=!e.children||0===!e.children.length;this.del(e._id,{isReply:a})}},created(){this._getTags(),this._getList(this.paginations)}},p=d,g=(a("d30b"),a("2877")),u=Object(g["a"])(p,i,n,!1,null,"006bf812",null);e["default"]=u.exports},"7f08":function(t,e,a){"use strict";function i(t){var e=new Date(t.date),a=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();return i<10&&(i="0"+i),n<10&&(n="0"+n),a+"-"+i+"-"+n}a.d(e,"a",(function(){return i}))},c0c5:function(t,e,a){},d30b:function(t,e,a){"use strict";var i=a("c0c5"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-d96ce4a0.747ca70d.js.map